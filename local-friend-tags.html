<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Klook AI Local Friend</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- Fonts --- */
        body { font-family: 'Poppins', 'Noto Sans SC', sans-serif; }
        
        /* --- Gradients & Effects from Figma --- */
        .ai-floating-bar-bg {
            background: linear-gradient(90deg, #FFEFE6 0%, #EDFAFA 100%);
        }
        
        .ai-floating-bar-shadow {
            box-shadow: 0px -4px 10px 0px rgba(255, 91, 0, 0.2);
        }

        /* The Gradient Border Container */
        .ai-border-gradient-wrapper {
            background: conic-gradient(from 0deg at 50% 50%, 
                rgba(77, 70, 211, 1) 12%, 
                rgba(32, 115, 249, 1) 33%, 
                rgba(8, 180, 185, 1) 46%, 
                rgba(56, 199, 140, 1) 55%, 
                rgba(255, 194, 0, 1) 67%, 
                rgba(255, 91, 0, 1) 83%, 
                rgba(245, 73, 202, 1) 97%);
            border-radius: 20px 20px 0 0;
            padding: 1px 1px 0 1px; /* Top, Right, Bottom=0, Left */
        }

        .ai-content-inner {
            border-radius: 19px 19px 0 0; /* Slightly smaller to fit inside */
            height: 100%;
        }

        /* Animations */
        @keyframes slideUp {
            0% { transform: translateY(120%); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
            /* ‰ºòÂåñÂêéÁöÑÂºπÊÄßÊõ≤Á∫ø (Spring Physics) */
            /* cubic-bezier(0.34, 1.56, 0.64, 1) Âà©Áî®Ë¥ùÂ°ûÂ∞îÊõ≤Á∫øËá™Â∏¶ÁöÑ Overshoot ÂÆûÁé∞‰∏ùÊªëÂõûÂºπ */
            /* 1.56 Ë°®Á§∫‰ºöÂêë‰∏äÂÜ≤ËøáÂ§¥Á∫¶ 56% ÁÑ∂ÂêéÂπ≥ÊªëÂõûËêΩÔºåÊØîÊâãÂä® Keyframe Êõ¥Ëá™ÁÑ∂ */
            animation: slideUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        /* Hide Scrollbar */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="h-screen w-full flex items-center justify-center bg-gray-50 antialiased">

    <!-- Smoother Outline Phone Mockup -->
    <!-- Added 'antialiased' to body for font smoothing -->
    <!-- Changed border to 8px and dark gray (#333) -->
    <!-- Optimized border-radius: outer is 56px, inner screen is 48px to create concentric smoothing -->
    <div class="relative w-[390px] h-[812px] bg-white rounded-[56px] overflow-hidden border-[8px] border-[#333] shadow-2xl z-10 transition-all duration-500 box-content">
        
        <!-- Status Bar Mockup -->
        <div class="absolute top-0 left-0 right-0 h-12 z-50 flex justify-between items-end px-7 pb-2 text-black font-semibold text-[15px] mix-blend-difference pointer-events-none select-none">
             <span>9:41</span>
             <div class="flex gap-1.5 items-center">
                 <i data-lucide="signal" width="16" height="16"></i>
                 <i data-lucide="wifi" width="16" height="16"></i>
                 <div class="w-6 h-3 border-[1.5px] border-current rounded-[4px] relative opacity-90"><div class="absolute inset-0.5 bg-current rounded-[1px]"></div></div>
             </div>
        </div>
        
        <!-- Notch (Smoother Dynamic Island) -->
        <div class="absolute top-[11px] left-1/2 -translate-x-1/2 h-[36px] w-[126px] bg-black rounded-[24px] z-[60]"></div>

        <!-- App Screen Content (Inner Radius optimized) -->
        <div class="w-full h-full bg-white relative overflow-hidden rounded-[46px]">
            
            <!-- 1. Background Image -->
            <div class="absolute inset-0 z-0">
                <img src="./assets/background-image.png" 
                     class="w-full h-full object-cover" 
                     alt="Background">
            </div>

            <!-- 2. AI Floating Bar -->
            <div id="ai-entry-bar" class="absolute bottom-0 left-0 right-0 z-20 cursor-pointer animate-slide-up">
                <div class="ai-border-gradient-wrapper ai-floating-bar-shadow transition-transform active:scale-[0.98]">
                    <div class="ai-content-inner ai-floating-bar-bg pb-12 pt-2 px-6">
                        <div class="w-full flex justify-center pb-3 pt-1">
                            <div class="w-10 h-1 bg-gray-300/50 rounded-full"></div>
                        </div>
                        <!-- Content Row -->
                        <div class="flex items-start gap-3">
                            <!-- Icon -->
                            <div class="mt-1.5 flex-shrink-0">
                                <img src="./assets/ai-icon.svg" width="16" height="16" alt="AI Icon">
                            </div>

                            <!-- Tags Container -->
                            <div class="flex-1 flex flex-wrap gap-2">
                                <!-- Tag 1 -->
                                <div class="bg-white border border-[#EEEEEE] rounded-full px-3 py-1.5 shadow-sm active:scale-95 transition-transform flex items-center justify-center">
                                    <span class="text-[13px] font-medium text-[#222222] font-poppins leading-tight">Got a few hours?</span>
                                </div>
                                <!-- Tag 2 -->
                                <div class="bg-white border border-[#EEEEEE] rounded-full px-3 py-1.5 shadow-sm active:scale-95 transition-transform flex items-center justify-center">
                                    <span class="text-[13px] font-medium text-[#222222] font-poppins leading-tight">Enjoy the snow!</span>
                                </div>
                            </div>
                            
                            <!-- Arrow (Implicit affordance) -->
                             <div class="mt-1.5 text-gray-400">
                                <i data-lucide="chevron-up" width="18" height="18"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. Chat Interface -->
            <div id="chat-interface" class="absolute inset-0 z-30 bg-gray-50 transform translate-y-full transition-transform duration-300 ease-out flex flex-col pt-12">
                <header class="bg-white/90 backdrop-blur-md px-5 py-3 border-b border-gray-100 flex justify-between items-center flex-shrink-0">
                    <div class="flex items-center">
                        <button id="close-chat" class="mr-3 text-gray-600 hover:bg-gray-100 p-1 rounded-full transition-colors">
                            <i data-lucide="chevron-down"></i>
                        </button>
                        <div class="flex items-center">
                            <div class="w-2 h-2 rounded-full bg-green-400 mr-2 animate-pulse"></div>
                            <h1 class="font-bold text-gray-800 text-lg">Local Friend</h1>
                        </div>
                    </div>
                    <button class="text-gray-400">
                        <i data-lucide="more-horizontal"></i>
                    </button>
                </header>
                <main id="chat-container" class="flex-1 overflow-y-auto p-5 pb-32 scroll-smooth">
                    <!-- Messages go here -->
                </main>
                <div class="bg-white p-5 border-t border-gray-100 pb-12">
                    <div class="flex items-center bg-gray-100 rounded-full px-4 py-3">
                        <input type="text" placeholder="Reply..." class="flex-1 bg-transparent outline-none text-sm text-gray-700 h-6 placeholder-gray-400">
                        <button class="ml-2 text-[#FF5B00]">
                            <i data-lucide="send" size="18"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Home Indicator -->
            <div class="absolute bottom-2 left-1/2 -translate-x-1/2 w-[134px] h-[5px] bg-[#333] rounded-full z-50 pointer-events-none opacity-30 mix-blend-difference"></div>

        </div>
    </div>

    <!-- Logic -->
    <script>
        lucide.createIcons();

        const entryBar = document.getElementById('ai-entry-bar');
        const chatInterface = document.getElementById('chat-interface');
        const closeChatBtn = document.getElementById('close-chat');
        const chatContainer = document.getElementById('chat-container');
        let hasStartedChat = false;

        // Open Chat
        entryBar.addEventListener('click', () => {
            chatInterface.classList.remove('translate-y-full');
            chatInterface.classList.add('translate-y-0');
            
            if (!hasStartedChat) {
                startConversation();
                hasStartedChat = true;
            }
        });

        // Close Chat
        closeChatBtn.addEventListener('click', () => {
            chatInterface.classList.add('translate-y-full');
            chatInterface.classList.remove('translate-y-0');
        });

        function startConversation() {
            // Delay slightly for natural feel
            setTimeout(() => {
                appendAiMessage("‚ú® Perfect night for Hakodate's view! Skip the ropeway queues with this smart shortcut.");
                
                // Then show the "product" card
                setTimeout(() => {
                    appendProductCard();
                }, 600);
            }, 300);
        }

        function appendAiMessage(text) {
            const div = document.createElement('div');
            div.className = 'flex w-full mb-4 animate-[fadeIn_0.3s_ease-out]';
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center mr-2 flex-shrink-0 border border-gray-200 text-lg shadow-sm">ü§ñ</div>
                <div class="bg-white text-gray-800 px-4 py-3 rounded-2xl rounded-tl-none border border-gray-100 shadow-sm max-w-[85%] text-sm leading-relaxed">
                    ${text}
                </div>
            `;
            chatContainer.appendChild(div);
        }

        function appendProductCard() {
            const div = document.createElement('div');
            div.className = 'flex w-full mb-4 animate-[fadeIn_0.3s_ease-out] pl-10'; // Indent
            div.innerHTML = `
                <div class="bg-white rounded-xl overflow-hidden shadow-md border border-gray-100 w-64 cursor-pointer hover:shadow-lg transition-shadow">
                    <div class="h-32 bg-gray-200 relative">
                        <img src="https://res.klook.com/image/upload/fl_lossy.progressive,q_85/c_fill,w_680/v1677464736/blog/vt1i9k7q5z8j5j5j5j5j.jpg" class="w-full h-full object-cover">
                        <div class="absolute top-2 right-2 bg-[#FF5B00] text-white px-2 py-0.5 rounded text-xs font-bold shadow-sm">Fast Track</div>
                    </div>
                    <div class="p-3">
                        <h4 class="font-bold text-gray-800 text-sm mb-1 line-clamp-2">Mt. Hakodate Night View Bus Tour</h4>
                        <div class="flex items-center text-xs text-gray-500 mb-2">
                             <i data-lucide="star" size="12" class="text-yellow-400 fill-current mr-1"></i> 4.8 (2k+)
                        </div>
                        <div class="flex justify-between items-center mt-2">
                            <span class="font-bold text-[#FF5B00]">¬• 2,500</span>
                            <span class="bg-gray-100 px-2 py-1 rounded text-xs text-gray-600 font-medium">Book Now</span>
                        </div>
                    </div>
                </div>
            `;
            chatContainer.appendChild(div);
            lucide.createIcons();
        }

    </script>
</body>
</html>