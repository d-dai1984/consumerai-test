<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Klook AI Local Friend</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- 
      STYLE CONFIGURATION 
    -->
    <style>
        /* --- 0. Animations & Keyframes --- */
        @keyframes flowGradient {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        @keyframes slideUp {
            0% {
                transform: translateY(20%); /* Áº©Áü≠ËøêÂä®Ë∑ØÂæÑÔºö‰ªé 60% ËÄå‰∏çÊòØ 120% ÂºÄÂßã */
                opacity: 0.7;              /* ÂàùÂßãÈÄèÊòéÂ∫¶ 50% */
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* --- 1. Global Reset & Fonts --- */
        body {
            font-family: 'Poppins', 'Noto Sans SC', sans-serif;
        }

        /* --- Custom Gradient Classes (kept in CSS for complexity) --- */
        .ai-gradient-border {
            background: linear-gradient(90deg, #4D46D3, #2073F9, #08B4B9, #38C78C, #FFC200, #FF5B00, #F549CA, #4D46D3, #2073F9);
            background-size: 200% 100%;
            animation: flowGradient 3s linear infinite;
        }

        .ai-gradient-border::before {
            content: "";
            position: absolute;
            top: 0; right: 0; bottom: 0; left: 0;
            z-index: -10;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            opacity: 0.6;
            filter: blur(24px);
            transform: translateY(0.25rem);
            
            background: inherit;
            background-size: inherit;
            animation: inherit;
        }

        .ai-content-card {
            background: linear-gradient(90deg, #FFEFE6 0%, #EDFAFA 100%);
        }
        
        .msg-row-bot {
            animation: fadeIn 0.3s ease-out;
        }

        .msg-padding {
            padding: 20px;
        }

        .msg-bubble-bot {
            background-color: white;
            border: 1px solid #EEEEEE;
            border-radius: 16px;
            /* padding: 0.75rem;  Removed original padding to use utility class */
            width: 100%; /* Force full width */
            max-width: 100%; /* Override previous 85% restriction */
            
            color: #212121;
            font-size: 14px;
            line-height: 1.5;
        }

        /* --- AI Rainbow Border Button --- */
        .ai-rainbow-btn {
            position: relative;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
        }
        
        .ai-rainbow-btn::before {
            content: "";
            position: absolute;
            inset: -2px; /* 2px stroke width */
            border-radius: 50%; 
            padding: 2px; 
            /* Reusing the flowGradient animation from floating bar */
            background: linear-gradient(90deg, #4D46D3, #2073F9, #08B4B9, #38C78C, #FFC200, #FF5B00, #F549CA, #4D46D3, #2073F9);
            background-size: 200% 100%;
            animation: flowGradient 3s linear infinite;
            
            -webkit-mask: 
               linear-gradient(#fff 0 0) content-box, 
               linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
        }

        /* --- Fluid Gradient Background Animation --- */
        @keyframes fluidGradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        .input-bg-gradient {
            position: relative;
            /* Ensure container has its own background for glass effect */
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            /* Hide overflow so the pseudo-element doesn't spill out */
            overflow: hidden; 
        }

        /* Use a pseudo-element for the animated gradient to keep it separate from the glass container */
        .input-bg-gradient::before {
            content: "";
            position: absolute;
            inset: 0;
            z-index: -1;
            background-size: 200% 200%;
            background-image: 
                radial-gradient(circle at 85% 60%, rgba(8, 180, 185, 0.25) 0%, transparent 50%),
                radial-gradient(circle at 10% 60%, rgba(255, 91, 0, 0.25) 0%, transparent 50%),
                radial-gradient(circle at 50% 100%, rgba(77, 70, 211, 0.2) 0%, transparent 50%);
            animation: fluidGradient 8s ease-in-out infinite;
            opacity: 0.6; /* Soften the gradient */
        }

        /* Top fade mask to blend with chat area - Improved blending */
        .input-bg-gradient::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 40px; /* Increased height for smoother transition */
            background: linear-gradient(to bottom, 
                rgba(255, 255, 255, 1) 0%, 
                rgba(255, 255, 255, 0.8) 40%,
                transparent 100%
            );
            z-index: 1;
            pointer-events: none;
        }

        /* --- 7. Animation Utilities --- */
        .animate-slide-up {
            animation: slideUp 0.8s cubic-bezier(0.34, 1.2, 0.64, 1) forwards;
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="h-screen w-full flex items-center justify-center bg-gray-50 antialiased">

    <!-- === MAIN PHONE CONTAINER === -->
    <div class="phone-frame relative w-[390px] h-[812px] bg-white rounded-[56px] overflow-hidden border-[8px] border-[#333] shadow-2xl z-10 transition-all duration-500 box-content">
        
        <!-- A. SYSTEM UI -->
        <div class="status-bar absolute top-0 left-0 right-0 h-12 z-50 flex justify-between items-end px-7 pb-2 text-black font-semibold text-[15px] mix-blend-difference pointer-events-none select-none">
             <span>9:41</span>
             <div class="flex gap-1.5 items-center">
                 <i data-lucide="signal" width="16" height="16"></i>
                 <i data-lucide="wifi" width="16" height="16"></i>
                 <div class="w-6 h-3 border-[1.5px] border-current rounded-[4px] relative opacity-90">
                    <div class="absolute inset-0.5 bg-current rounded-[1px]"></div>
                 </div>
             </div>
        </div>
        <div class="notch absolute top-[11px] left-1/2 -translate-x-1/2 h-[36px] w-[126px] bg-black rounded-[24px] z-[60]"></div>
        <div class="home-indicator absolute bottom-2 left-1/2 -translate-x-1/2 w-[134px] h-[5px] bg-[#333] rounded-full z-50 pointer-events-none opacity-30 mix-blend-difference"></div>

        <!-- B. APP CONTENT SCREEN -->
        <div class="w-full h-full bg-white relative overflow-hidden rounded-[46px]">
            
            <!-- B1. Background Layer -->
            <div class="absolute inset-0 z-0">
                <img src="./assets/background-image.png" class="w-full h-full object-cover" alt="Background">
            </div>
            
            <!-- B2. AI Entry Bar (Floating State) -->
            <div id="ai-entry-bar" class="ai-entry-container absolute bottom-0 left-0 right-0 z-20 cursor-pointer animate-slide-up">
                <!-- Wrapper for Gradient Border -->
                <div class="ai-gradient-border relative rounded-t-[20px] p-[1px] transition-transform active:scale-[0.98]">
                    <!-- Inner Content -->
                    <div class="ai-content-card rounded-t-[19px] h-full relative z-10 pb-12 pt-2 px-6">
                        <!-- Handle Bar -->
                        <div class="w-full flex justify-center pb-3 pt-1">
                            <div class="w-10 h-1 bg-gray-300/50 rounded-full"></div>
                        </div>
                        
                        <!-- Content Row -->
                        <div class="flex items-start gap-3">
                            <div class="mt-1.5 flex-shrink-0">
                                <img src="./assets/ai-icon.svg" width="16" height="16" alt="AI Icon">
                            </div>
                            <!-- Chips -->
                            <div class="flex-1 flex flex-wrap gap-2">
                                <div class="suggestion-chip bg-white border border-[#EEEEEE] rounded-full px-3 py-1.5 shadow-sm active:scale-95 transition-transform flex items-center justify-center">
                                    <span class="suggestion-text text-[13px] font-medium text-[#222222] leading-tight">Got a few hours?</span>
                                </div>
                                <div class="suggestion-chip bg-white border border-[#EEEEEE] rounded-full px-3 py-1.5 shadow-sm active:scale-95 transition-transform flex items-center justify-center">
                                    <span class="suggestion-text text-[13px] font-medium text-[#222222] leading-tight">Enjoy the snow!</span>
                                </div>
                            </div>
                            <div class="mt-1.5 text-gray-400">
                                <i data-lucide="chevron-up" width="18" height="18"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- B3. Chat Interface Overlay (Expanded State) -->
            <div id="chat-interface" class="chat-overlay absolute inset-0 z-30 bg-white transform translate-y-full transition-transform duration-300 ease-out flex flex-col pt-[47px]">
                
                <!-- Header -->
                <header class="chat-header absolute top-0 left-0 right-0 h-[92px] z-40">
                    <!-- Spacer for Status Bar -->
                    <div class="h-[47px] w-full bg-white/80 backdrop-blur-md"></div>
                    <!-- Navigation Bar -->
                    <div class="chat-header-bar h-[45px] w-full bg-white/80 backdrop-blur-md flex items-center px-4 relative border-b border-gray-50">
                        <button id="close-chat" class="w-10 h-10 flex items-center justify-center -ml-2 text-[#212121]">
                            <i data-lucide="chevron-left" width="24" height="24"></i>
                        </button>
                        <div class="absolute left-1/2 -translate-x-1/2 font-poppins font-semibold text-[16px] text-[#212121]">
                            Mastering Hokkaido
                        </div>
                    </div>
                </header>

                <!-- Chat Body (Scrollable) -->
                <main id="chat-container" class="chat-container flex-1 overflow-y-auto bg-white px-5 py-4 pt-[60px] pb-[160px] scroll-smooth">
                    

                    <!-- User Message 1 -->
                    <div class="msg-row-user flex flex-col items-end gap-1 mb-6">
                        <div class="msg-bubble-user msg-padding bg-[#ECF3FC] rounded-[24px] rounded-tr-[4px] max-w-[85%] text-[#212121] text-[14px] leading-normal">
                            First time in Hokkaido!¬†‚ùÑÔ∏è Want the highlights but wanna keep it chill. Any pro tips?
                        </div>
                    </div>

                    <!-- Bot Message 1 -->
                    <div class="msg-row-bot flex flex-col gap-1 mb-6 w-full">
                        <!-- Bot Identity -->
                        <div class="flex items-center gap-2 mb-1 px-1">
                             
                            <span class="text-[#8A8A8A] text-[12px] font-poppins">Nori_(„Éé„É™) / Yuki</span>
                        </div>
                        
                        
                             <!-- Message Content -->
                             <div class="msg-bubble-bot msg-padding w-full">
                                <!-- Inner Card Container -->
                                <div>
                                    
                                    <!-- 1. Welcome Text -->
                                    <p class="text-[#212121] text-[14px] leading-relaxed mb-4 whitespace-pre-wrap">Got you! For a first trip, the <b>'Golden Triangle'</b> is the move. üëá

Skip the long travel times. Stick to <b>Sapporo, Otaru, & Noboribetsu</b>. Best food, snowy vibes, and super easy trains. üöÜüçú</p>

                                    <!-- 2. Product Section -->
                                    <div class="w-full">
                                        <h4 class="font-poppins font-semibold text-[16px] text-[#212121] mb-3">Must-dos in here</h4>
                                        
                                        <!-- Product Card -->
                                        <div class="bg-white rounded-[12px] p-0">
                                            
                                            <!-- Image Scroll -->
                                            <div class="flex gap-3 overflow-x-auto pb-0 snap-x hide-scrollbar mb-2">
                                                <div class="w-[160px] h-[100px] flex-shrink-0 rounded-[8px] overflow-hidden snap-start relative bg-gray-100 border border-gray-100">
                                                    <img src="./assets/niseko-1.png" class="w-full h-full object-cover">
                                                </div>
                                                <div class="w-[160px] h-[100px] flex-shrink-0 rounded-[8px] overflow-hidden snap-start relative bg-gray-100 border border-gray-100">
                                                    <img src="./assets/niseko-2.png" class="w-full h-full object-cover">
                                                </div>
                                                <div class="w-[160px] h-[100px] flex-shrink-0 rounded-[8px] overflow-hidden snap-start relative bg-gray-100 border border-gray-100">
                                                    <img src="./assets/niseko-3.png" class="w-full h-full object-cover">
                                                </div>
                                                 <div class="w-[160px] h-[100px] flex-shrink-0 rounded-[8px] overflow-hidden snap-start relative bg-gray-100 border border-gray-100">
                                                    <img src="./assets/niseko-4.png" class="w-full h-full object-cover">
                                                </div>
                                            </div>

                                            <!-- Info -->
                                            <div class="flex flex-col gap-2">
                                                <h5 class="font-poppins font-semibold text-[14px] text-[#212121] leading-[1.5em] line-clamp-2">Niseko Ski Resort - New Chitose Airport & Sapporo Shuttle Bus</h5>
                                                
                                                <!-- Rating Row -->
                                                <div class="flex items-center flex-wrap gap-2 text-[12px] text-[#757575]">
                                                    <div class="flex items-center gap-0.5 bg-[#F1EEFA] text-[#6056D6] px-1.5 py-0.5 rounded-[4px] border border-[#DBD5F9] h-[21px]">
                                                        <span class="font-semibold text-[12px]">4.8</span>
                                                        <i data-lucide="star" width="10" height="10" class="fill-current"></i>
                                                    </div>
                                                    <span>876 reviews</span>
                                                    <span class="w-0.5 h-0.5 bg-gray-400 rounded-full"></span>
                                                    <span>100K+ booked</span>
                                                </div>

                                                <!-- Tags -->
                                                <div class="flex flex-wrap gap-1.5">
                                                    <span class="px-1.5 py-0.5 bg-[#F5F5F5] text-[#757575] text-[12px] rounded-[2px] leading-[1.32]">Free cancellation</span>
                                                    <span class="px-1.5 py-0.5 bg-[#F5F5F5] text-[#757575] text-[12px] rounded-[2px] leading-[1.32]">Book now for tomorrow</span>
                                                </div>

                                                <!-- Footer: Price & Action -->
                                                <div class="flex items-end justify-between pt-1">
                                                    <div class="flex items-baseline gap-1">
                                                        <span class="text-[14px] text-[#212121] font-normal font-poppins">From</span>
                                                        <span class="text-[14px] font-semibold text-[#212121] font-poppins">NT$39.65</span>
                                                    </div>
                                                    <button class="flex items-center gap-1 bg-white text-[#6056D6] text-[14px] font-normal px-0 py-0 active:scale-95 transition-transform font-poppins">
                                                        <i data-lucide="heart" width="16" height="16"></i>
                                                        Save
                                                    </button>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                </div>
                             </div>
                        
                        
                         <!-- Feedback Controls -->
                         <div class="flex justify-end gap-4 mt-1 pr-2 text-[#8A8A8A]">
                             <button class="hover:text-[#FF5B00] transition-colors"><i data-lucide="thumbs-up" width="16" height="16"></i></button>
                             <button class="hover:text-[#FF5B00] transition-colors"><i data-lucide="thumbs-down" width="16" height="16"></i></button>
                         </div>
                    </div>

                    <!-- User Message 2 (Delayed Animation) -->
                    <div class="msg-row-user flex flex-col items-end gap-1 mb-6 animate-[fadeIn_0.3s_ease-out_0.2s] opacity-0" style="animation-fill-mode: forwards;">
                        <div class="msg-bubble-user msg-padding bg-[#ECF3FC] rounded-[24px] rounded-tr-[4px] max-w-[85%] text-[#212121] text-[14px] leading-normal">
                            Love that! üòç But what about the famous Hakodate night view? Worth the detour?
                        </div>
                    </div>
                </main>

                <!-- Input Area -->
                <div id="input-area-wrapper" class="input-area-wrapper absolute bottom-0 left-0 right-0 z-50 input-bg-gradient pb-8 pt-12 flex flex-col justify-end transition-opacity duration-300">
                    <!-- Field Container matching Figma 'field' -->
                    <div class="field-container w-full h-[50px] px-4 flex items-center justify-center gap-[10px]">
                        
                        <!-- 1. AI Mic Button (Left) -->
                        <button class="ai-rainbow-btn active:scale-95 transition-transform flex-shrink-0">
                            <img src="./assets/icon-mic.svg" width="24" height="24" alt="Mic">
                        </button>

                        <!-- 2. Input Field (Right) -->
                        <div class="w-[190px] h-[50px] bg-white border border-[#E6E6E6] rounded-[25px] flex items-center px-4 gap-1.5 shadow-sm">
                            <img src="./assets/icon-keyboard.svg" width="24" height="15" alt="Keyboard">
                            <input type="text" placeholder="Type a message" class="flex-1 h-full bg-transparent outline-none text-[14px] text-[#212121] font-poppins placeholder-[#757575]">
                        </div>

                    </div>
                </div>

            </div>
            <!-- End Chat Interface -->

        </div>
    </div>

    <!-- === INTERACTION LOGIC === -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Initialize Icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            // 2. DOM Elements
            const elements = {
                entryBar: document.getElementById('ai-entry-bar'),
                chatInterface: document.getElementById('chat-interface'),
                closeChatBtn: document.getElementById('close-chat'),
                chatContainer: document.getElementById('chat-container'),
                inputWrapper: document.getElementById('input-area-wrapper')
            };

            // 3. State Management
            let state = {
                hasStartedChat: false,
                isScrolling: null
            };

            // Scroll Interaction Logic
            if (elements.chatContainer && elements.inputWrapper) {
                elements.chatContainer.addEventListener('scroll', () => {
                    // Hide input area on scroll
                    elements.inputWrapper.classList.add('opacity-0', 'pointer-events-none');
                    
                    // Clear existing timeout
                    window.clearTimeout(state.isScrolling);

                    // Set timeout to show input area after scroll stops
                    state.isScrolling = setTimeout(() => {
                        elements.inputWrapper.classList.remove('opacity-0', 'pointer-events-none');
                    }, 150); // 150ms delay for snappier feel
                });
            }

            // 4. Event Handlers
            if (elements.entryBar && elements.chatInterface) {
                // Open Chat Flow
                elements.entryBar.addEventListener('click', () => {
                    elements.chatInterface.classList.remove('translate-y-full');
                    elements.chatInterface.classList.add('translate-y-0');
                    
                    if (!state.hasStartedChat) {
                        state.hasStartedChat = true;
                    }
                });
            }

            if (elements.closeChatBtn && elements.chatInterface) {
                // Close Chat Flow
                elements.closeChatBtn.addEventListener('click', () => {
                    elements.chatInterface.classList.add('translate-y-full');
                    elements.chatInterface.classList.remove('translate-y-0');
                });
            }
        });
    </script>
</body>
</html>